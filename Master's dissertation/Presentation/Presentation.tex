\documentclass[notes]{beamer}
\usepackage{beamerthemeshadow}
\usepackage{comment}

%\usepackage{pgf,pgfarrows,pgfnodes,pgfautomata,pgfheaps,pgfshade}

\usepackage[cp1251]{inputenc}
\usepackage[T2A,OT1]{fontenc}
\usepackage[russian]{babel}
\usepackage{mathrsfs}
\usepackage{multirow}
\usefonttheme[onlymath]{serif}

%\newtheorem{teorema}{Теорема}
%\newtheorem{lemma1}{Лемма 1}
%\newtheorem{lemma2}{Лемма 2}


\def \M {\mbox{\bf M}}
\def\PP{{\cal{P}}}
\newcommand{\RR}{\mbox{\rm I\hspace*{-.2em}R}}
\DeclareMathOperator{\col}{col}
\DeclareMathOperator{\argmin}{argmin}
\def\eqdf{{\;{\mathop{=}\limits^{def}}\;}}

\newcommand{\ora}{\overrightarrow}
\newcommand{\ola}{\overleftarrow}

\DeclareMathOperator{\Arg}{Arg}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Conv}{Conv}

\newcommand*{\hm}[1]{#1\nobreak\discretionary{}%
            {\hbox{$\mathsurround = 0pt #1$}}{}}


\title[МАИ]{%
Организация поиска ограниченного по времени тестирования в случае непрерывного распределения вектора случайных параметров}
\author[ Наумов, Черыгова]{{\itshape%
Черыгова Е.Е. - студентка группы 8О-204М \\
Наумов А.В. - проф., д.ф.-м.н.
%\\
%Научный руководитель:  доц., к.ф.-м.н. Наумов А.\,В.
}}
\institute[МАИ]{%
Московский авиационный институт \\
Институт № 8 <<Информационные технологии и прикладная математика>>\\
Кафедра <<Теория вероятностей и компьютерное моделирование>>
}
\date{МАИ, 2020}

%\pgfdeclareimage[width=10mm]{mai-logo}{mai_logo}

%\logo{\pgfuseimage{mai-logo}}

\newcounter{numpage}
\setcounter{numpage}{0}
\def\usenumpage{\refstepcounter{numpage}\arabic{numpage}}
\def\Frametitle#1{\frametitle{\centering\usenumpage.~{#1}}}
%\def\Frametitle#1{\frametitle{\centering{#1}}}

\begin{document}
\small
\frame{\titlepage}

\frame
{\Frametitle{
%\centering%
Модели времени ответа пользователя СДО. Непрерывная модель ван дер Линдена}
Логарифм времени ответа \emph{j-}го пользователя на \emph{i-}е задание имеет вид
%\begin{align}
$$\ln T_{ij}=\mu+\beta_i+\tau_j+\varepsilon_{ij}, \qquad \underset{i=1}{\overset{I}{\sum}}\beta_i=0 , \qquad \underset{j=1}{\overset{J}{\sum}} \tau_j=0,$$
%\end{align}
где $T_{ij}$ - случайная величина, обозначающая время ответа $j$-го пользователя на $i$-ю задачу, $\beta_i$ - параметр сложности задания, $\tau_j$ - физиологические особенности пользователя, $\mu$ - общая составляющая для всех пользователей и заданий, $\varepsilon_{ij}$ - случайное отклонение, $\varepsilon_{ij} \sim N(0,\sigma^2), \: i=\overline{1,I}, \:  j=\overline{1,J}$ - независимые гауссовские случайные величины.
Таким образом $$T_{ij} \sim LogN(\mu+\beta_i+\tau_j,\sigma^2).$$

}

\frame
{\Frametitle{
%\centering%
Модели времени ответа пользователя СДО. Непрерывная модель ван дер Линдена (продолжение)}
Оценки параметров модели:
%\begin{gather}
$$\hat{\mu}=\frac{ \underset{j=1}{\overset{J}{\sum}} \underset{i=1}{\overset{I}{\sum}} \ln t_{ij}}{IJ}, \ \hat{\beta_i}=\frac{\underset{j=1}{\overset{J}{\sum}} \ln t_{ij}}{J} - \hat{\mu},$$ \\
$$\hat{\tau_j}=\frac{\underset{i=1}{\overset{I}{\sum}} \ln t_{ij}}{I} - \hat{\mu}, \
\hat{\sigma}^2=\frac{\underset{j=1}{\overset{J}{\sum}} \underset{i=1}{\overset{I}{\sum}} (\ln t_{ij} - \hat{\tau_j} - \hat{\beta_i} - \hat{\mu})^2}{IJ}$$
%\end{gather}
Логнормальная модель времени ответа j-го пользователя на i-е задание имеет плотность вероятности вида:
%\begin{align}
$$f(t_{ij},\hat{\mu},\hat{\beta_i},\hat{\tau_j},\hat{\sigma})=\frac{1}{t_{ij} \sqrt{2\pi\hat{\sigma}^2}} exp \Bigl\{ -\frac{1}{2} \Bigm[\frac{\ln t_{ij}-(\hat{\mu}+\hat{\beta_i}+\hat{\tau_j})}{\sqrt{\hat{\sigma}^2}} \Bigm]^2\Bigl\}$$
%\end{align}


}

\frame{
\Frametitle{Постановка задачи определения оптимального набора ограниченных по времени тестовых заданий}
Пусть существует множество $Z = (z_1,\ldots, z_I)$ из $I$ заданий, разделенных на M различных типов, $I_m$ - число заданий $m$-го типа, тогда $\underset{m=1}{\overset{M}{\sum}} I_m = I, \: m = \overline{1,M}.$ Для обозначения принадлежности задания к определенному типу введем матрицу A размерности $I\times M$:
\[
A =\parallel a_i^m\parallel, a_i^m =
\begin{cases}
1, & \text{$z_i\in Z_m$,} \\
0, & \text{$z_i\notin Z_m$.}
\end{cases}
\]
Пусть $u \in R^I$ вектор принадлежности задания к тесту:
$$
u_i =
\begin{cases}
1, & \text{если задача $i$ попала в тестовый набор,} \\
0, & \text{если задача $i$ не попала в тестовый набор.}
\end{cases}
$$
Определим вектор $w \in R^I$, $i$-я координата которого является сложностью $i$-го задания. Пусть $c$ - суммарная сложность теста и \emph{k} - количество заданий в тесте, $k\geqslant M$.

}

\frame{
\Frametitle{Постановка задачи (продолжение)}

Пусть в тестировании участвуют $N$ пользователей. Обозначим через $T_i^n$ случайное время, которое потребуется пользователю $n$, на решение $i$ задачи, где $i = \overline{1, I},$ $\: n = \overline{1,N},$ $\: T_i^n \sim LogN(\hat{\mu}+\hat{\beta}_i+\hat{\tau}_n,\hat{\sigma}^2)$. Рассмотрим матрицу $T$ размерности $N \times I$:
$$T = \parallel T^n_i\parallel.$$
Будем предполагать, что случайные величины $T^n_i$ являются независимыми.


Пусть общее время на выполнение теста неизвестно. Обозначим его через $\varphi$. Рассмотрим функцию квантили:
\begin{gather}
\Phi_\alpha (u) {\overset{\triangle}{=}} min\{\varphi \in R^1: P\{\underset{n=\overline{1,N}}{\overset{}{max}} T_n u\leqslant\varphi\}\geqslant\alpha\},
\end{gather}
где $ T_n,\: n-$я строка матрицы $T$.
}

\frame{
\Frametitle{Постановка задачи (продолжение)}

В случае логнормального распределения времени ответа студентов, получить точное значение квантили заданного уровня не представляется возможным.\\
Преодолеть указанный недостаток предлагается использованием гамма-распределения в качестве модели времени ответа пользователя на задание, так как плотности вероятности логнормального и гамма-распределений имеют схожие структуры, и гамма-распределение обладает следующим свойством:\\
Если $\Theta_1,\ldots,\Theta_I$ - независимые СВ, такие что $\Theta_i\sim\Gamma(k_i,\theta), \: i=\overline{1,I},$ то $$\vartheta = \underset{i=1}{\overset{I}{\sum}} \Theta_i \sim \Gamma (\underset{i=1}{\overset{I}{\sum}} k_i,\theta).$$
Необходимо подобрать параметр $\theta$ таким образом, чтобы он был одинаковым для всех задач, и при этом для максимального количества заданий принималась бы гипотеза о гамма-распределении времени ответа пользователя на это задание.
}

\frame
{\Frametitle{
%\centering%
Постановка задачи. Алгоритм подбора параметров гамма-распределения.}
%Обозначим через $T_{ij}$ - случайное время ответа $j$-го пользователя на $i$-е задание. \\
\scriptsize{
0. Зафиксировать номер пользователя $n$ и положить $$\theta_n^*=0, k_{in}^*=0, S=0, m=0,$$ где  $\theta_n^*$ - искомое значение параметра гамма-распределения, $k_{in}^*$ - искомое значение второго параметра распределения, $S$ - число задач, для которых принимается гипотеза о гамма-распределении, $m$ - счётчик.\\
1. $\forall i=\overline{1,I}$ сгенерировать выборки $t_{in}^\nu$ СВ $T^n_i$ объёма $\nu$ и методом максимального правдоподобия найти оценки $\widehat{\theta}_{in}$ параметра $\theta_n$. Положить

$$\widehat{\theta}_{min\; n}=\underset{i=\overline{1,I}}{\overset{}{ min}}\{\widehat{\theta}_{in}\},\;
\widehat{\theta}_{max\;n}=\underset{i=\overline{1,I}}{\overset{}{ max}}\{\widehat{\theta}_{in}\},$$
$$h=\frac{\widehat{\theta}_{max\;n}-\widehat{\theta}_{min\;n}}{L}, \: \theta^m_{n}=\widehat{\theta}_{min\;n}-h,$$
где $h$ - шаг для варьирования $\theta_n$, $L$ - число шагов дискретизации. \\

2. $m:=m+1, \theta^m_{n}=\theta^{m-1}_{n}+h, \widehat{k}_{in}=\frac{\overline{t}_{in}^\nu}{\theta^m_{n}},$
где $\overline{t}_{in}^\nu$ - выборочное МО.

3. $\forall i=\overline{1,I}$ проверить гипотезу $H_0=t_{in}\sim\Gamma(\widehat{k}_{in},\theta^m_{n})$ с помощью критерия Пирсона на выбранном уровне доверительной вероятности $1-\alpha$. Если число принятых гипотез $S'>S$, то положить $S=S', \theta_n^*=\theta^m_{n}, k^*_{in}=\widehat{k}_{in}, i=\overline{1,I}.$

4. Если $m\leqslant L-1,$ то перейти к шагу 2.

5. Окончание работы алгоритма.
}\par
}

\frame{
\Frametitle{Постановка задачи (продолжение)}

Пусть $\Theta_i^n \sim \Gamma(\hat{k}_{in},\hat{\theta}_n)$, где $\Theta^n_i$ - случайное время, которое потребуется пользователю $n$ на решение $i$ задачи. Введём матрицу $\Theta$ размерности $N \times I$: $$ \Theta = \parallel \Theta^n_i\parallel.$$

В предположении, что случайные величины $\Theta^n_i$ являются независимыми, функция квантили (1) примет вид:
\begin{gather}
\Phi_\alpha (u) {\overset{\triangle}{=}} min\{\varphi \in R^1: P\{\underset{n=\overline{1,N}}{\overset{}{max}} \Theta_n u\leqslant\varphi\}\geqslant\alpha\},
\end{gather}
где $ \Theta_n,\: n-$я строка матрицы $\Theta$.
}


\frame
{\Frametitle{Постановка задачи (продолжение)}
В силу свойств гамма-распределения, функцию в (2) можно записать в виде:

$$\Phi_\alpha (u) {\overset{\triangle}{=}} min\{\varphi \in R^1: P\{\vartheta_1\leqslant\varphi,\ldots,\vartheta_N\leqslant\varphi\}\geqslant\alpha\}=$$
\begin{gather}
=min\{\varphi \in R^1: F_{\vartheta_1}(\varphi)\cdot\ldots\cdot F_{\vartheta_N}(\varphi)\geqslant\alpha\},
\end{gather}

где $\vartheta_n=\Theta_n\cdot u,\; \vartheta_n\sim\Gamma(\hat{k}_n^T\cdot u,\; \hat{\theta}_n), \; n=\overline{1,N}$ - независимые СВ, $\hat{k}_n=(\hat{k}_{1n}, \ldots, \hat{k}_{In})^T,\; n=\overline{1,N}.$

}

\frame{
\Frametitle{Постановка задачи (продолжение)}
\begin{gather}
u_\alpha=Arg \:\underset{u\in \{0,1\}^I}{\overset{}{ min}}\:(\gamma\frac{\mid c-w^T u \mid}{\varepsilon} + (1-\gamma)\frac{\Phi_\alpha(u)}{2700}),\\
\varphi_\alpha=\underset{u\in \{0,1\}^I}{\overset{}{min}}\:(\gamma\frac{\mid c-w^T u \mid}{\varepsilon} + (1-\gamma)\frac{\Phi_\alpha(u)}{2700}),\\
c-w^T u\leqslant\varepsilon, \\
w^T u-c\leqslant\varepsilon, \\
A^Tu\geqslant e_M, \\
e^Tu=k,
\end{gather}
где $(\cdot)^T$ - операция транспонирования, $\gamma\in[0,1]$ - весовой коэффициент, $\alpha\in(0,1)$ - заданный уровень доверительной вероятности, $e \in R^I,\:e=(1,\ldots,1)^T,\: e_M \in R^M, \: e_M=(1,\ldots,1)^T$.
}

\frame{
\Frametitle{Алгоритм поиска оптимального набора заданий}
1. Составить множество $\overline{U}$ всех $u$, удовлетворяющих неравенствам (6) - (9): $$\overline{U} \underset{}{\overset{\triangle}{=}} \{ u \in R^I : c-w^T u\leqslant\varepsilon, \: w^T u-c\leqslant\varepsilon, \: A^Tu\geqslant e_M, \: e^Tu=k, \: u \in \{0,1\}^I \}; $$ \\
2. Для каждого $u^s \in \overline{U}$ найти
$$\varphi_{s}^{\ast}\triangleq min \{ \varphi \in R^1: F_{\vartheta_1}(\varphi)\cdot\ldots\cdot F_{\vartheta_N}(\varphi)\geqslant\alpha\},\; n=1,\ldots,N,$$
$$ \psi_s^\ast=\gamma \frac{\mid c-w^T u^s \mid}{\varepsilon}  + (1-\gamma)\frac{\varphi_s^\ast}{2700}$$
3. Среди всех $\psi_s^\ast$ выбираем наименьшее ($\psi_{s^\ast}^\ast$);\\
4. Полагаем решение исходной задачи (3)-(9) равным $u^{s^\ast},\psi_{s^\ast}^\ast,\varphi_{s^\ast}^\ast$.
}

\frame{
\Frametitle{Результаты численного эксперимента}
Таблица 1 Наборы заданий для минимальных значений критериальной функции для разных значений допустимых отклонений от суммарной сложности теста
\begin{figure}[h]
\center{\includegraphics[scale=0.4]{11.png}}
\end{figure}
}

\frame{
\Frametitle{Результаты численного эксперимента (продолжение)}
Таблица 2 Подбор оптимального набора заданий для $\varepsilon=0.005$ и различных значений весового коэффициента $\gamma$
\begin{figure}[h]
\center{\includegraphics[scale=0.5]{3.png}}
\end{figure}
}

\frame{
\Frametitle{Результаты численного эксперимента (продолжение)}
\begin{figure}[h]
\center{\includegraphics[scale=0.25]{2.png}}
\end{figure}
Рисунок 1 Квантили времени выполнения подобранных тестов в зависимости от $\gamma$ для $\varepsilon=0.005$

}


\frame{
\Frametitle{Основные результаты работы}
\begin{itemize}
\item предложена постановка задачи формирования теста заданного уровня сложности с минимальным временем выполнения для группы студентов, задача сформулирована в терминах одноэтапной задачи квантильной оптимизации;
\item представлен алгоритм решения сформулированной задачи, основанный на её декомпозиции;
\item получены результаты численного эксперимента, подтверждающие адекватность предложенной модели;
\item опубликована статья в журнале «Вестник компьютерных и информационных технологий» и тезисы в сборниках докладов «XLV Гагаринских чтений», 17-й и 18-й Международной конференции «Авиация и космонавтика».
\end{itemize}

}

\end{document} 